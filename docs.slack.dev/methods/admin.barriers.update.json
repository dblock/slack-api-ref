{
  "desc": "Update an existing Information Barrier",
  "http_method": "POST",
  "scope": {
    "user": [
      "admin.barriers:write"
    ]
  },
  "rate_limits": "t2",
  "args": {
    "type": "object",
    "required": [
      "token",
      "barrier_id",
      "primary_usergroup_id",
      "barriered_from_usergroup_ids",
      "restricted_subjects"
    ],
    "properties": {
      "token": {
        "type": "string",
        "subtype": "auth",
        "desc": "Authentication token bearing required scopes. Tokens should be passed as an HTTP Authorization header or alternatively, as a POST parameter.",
        "example": "xxxx-xxxxxxxxx-xxxx"
      },
      "barrier_id": {
        "desc": "The ID of the barrier you're trying to modify",
        "schema": "barrier_id"
      },
      "primary_usergroup_id": {
        "desc": "The id of the primary [IDP Group](https://slack.com/help/articles/115001435788-Connect-identity-provider-groups-to-your-Enterprise-organization)",
        "schema": "subteam_id"
      },
      "barriered_from_usergroup_ids": {
        "desc": "A list of [IDP Groups](https://slack.com/help/articles/115001435788-Connect-identity-provider-groups-to-your-Enterprise-organization) ids that the primary usergroup is to be barriered from.",
        "type": "array",
        "items": {
          "schema": "subteam_id"
        }
      },
      "restricted_subjects": {
        "desc": "What kind of interactions are blocked by this barrier? For v1, we only support a list of all 3, eg `im, mpim, call`",
        "type": "array",
        "items": {
          "type": "string",
          "enum": [
            "im",
            "mpim",
            "call"
          ]
        }
      }
    }
  },
  "output": {
    "type": "object",
    "required": [
      "ok",
      "barrier"
    ],
    "properties": {
      "ok": {
        "type": "boolean"
      },
      "barrier": {
        "schema": "information_barrier"
      }
    }
  },
  "errors": {
    "barrier_already_exists": {
      "desc": "There already exists another barrier restricting activity between two or more of your requested usergroups."
    },
    "barrier_not_found": {
      "desc": "The barrier you're trying to update cannot be found."
    },
    "barriered_from_usergroups_not_found": {
      "desc": "One or more of the ids passed in for barriered_from_usergroup_ids can’t be found."
    },
    "feature_not_enabled": {
      "desc": "The information barrier feature is not enabled, please reach out to your CSM."
    },
    "invalid_restricted_subjects": {
      "desc": "The restricted subjects provided are invalid or not currently supported."
    },
    "not_an_admin": {
      "desc": "The token provided is not associated with an org admin."
    },
    "primary_usergroup_not_found": {
      "desc": "The id passed in for primary_usergroup_id can’t be found."
    }
  },
  "examples": {
    "success": {
      "url": "/api/admin.barriers.update?token=YOUR_TOKEN",
      "description": "The response includes `enterprise ID`, `barrier ID`",
      "example": {
        "ok": true,
        "barrier": {
          "id": "Ba03T70KB2H3",
          "enterprise_id": "E03055H6DAS",
          "primary_usergroup": {
            "id": "S03TZK4A9H6",
            "name": "Company That Pays Contracting Teams"
          },
          "barriered_from_usergroups": [
            {
              "id": "S03TNHGAUGZ",
              "name": "Another External Contracting Team"
            }
          ],
          "restricted_subjects": [
            "im",
            "mpim",
            "call"
          ],
          "date_update": 1660224825
        }
      }
    },
    "error": {
      "url": "/api/admin.barriers.update?token=YOUR_TOKEN",
      "description": "Typical error response if you do not have information barrier enabled. Reach out to your CSM.",
      "example": {
        "ok": false,
        "error": "feature_not_enabled"
      }
    }
  }
}