{
  "group": "apps",
  "name": "apps.datastore.count",
  "deprecated": false,
  "desc": "Count the number of items in a datastore that match a query",
  "args": {
    "app_id": {
      "required": false,
      "desc": "Required if calling with user token."
    },
    "datastore": {
      "required": true,
      "desc": "Name of the datastore.",
      "type": "string"
    },
    "expression": {
      "required": false,
      "example": "#artist = :artist_name",
      "desc": "A query filter expression.",
      "type": "string"
    },
    "expression_attributes": {
      "required": false,
      "example": "{ \"#artist\": \"artist\" }",
      "desc": "A map of attributes referenced in expression.",
      "type": "object"
    },
    "expression_values": {
      "required": false,
      "example": "{ \":artist_name\": \"Fred Rogers\" }",
      "desc": "A map of values referenced in expression.",
      "type": "object"
    }
  },
  "response": {
    "examples": [
      "{\n    \"ok\": true,\n    \"datastore\": \"good_tunes\",\n    \"count\": 2\n}",
      "{\n    \"ok\": false,\n    \"error\": \"datastore_error\",\n    \"errors\": [\n        {\n            \"code\": \"datastore_config_not_found\",\n            \"message\": \"The datastore configuration could not be found\",\n            \"pointer\": \"/datastores\"\n        }\n    ]\n}"
    ]
  },
  "errors": {
    "invalid_arguments": "The request is missing required arguments.",
    "invalid_datastore": "The provided datastore is invalid.",
    "invalid_auth": "Not authorized to access datastore items.",
    "app_not_hosted": "The app developer is not using a Slack-hosted environment. App datastores are exclusively available for Slack-hosted apps.",
    "datastore_error": "Datastore error",
    "access_denied": "Not authorized to access the datastore.",
    "invalid_app_id": "The app_id provided is not valid for team and user.",
    "free_team_not_allowed": "Datastore query not allowed on a free team.",
    "team_quota_exceeded": "Total number of requests exceeded team quota.",
    "datastore_migration_in_progress": "The datastore is currently unavailable due to an in progress Enterprise org migration.",
    "restricted_plan_level": "Feature is not available on this team"
  }
}